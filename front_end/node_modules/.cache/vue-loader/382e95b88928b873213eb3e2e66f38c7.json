{"remainingRequest":"/home/nikhil/Desktop/Project/front_end/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nikhil/Desktop/Project/front_end/src/components/Bill.vue?vue&type=style&index=0&id=0b1d74b7&scope=true&lang=css","dependencies":[{"path":"/home/nikhil/Desktop/Project/front_end/src/components/Bill.vue","mtime":1628680119302},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/css-loader/dist/cjs.js","mtime":1626765536510},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1626765537046},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/postcss-loader/src/index.js","mtime":1626765536658},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/vue-loader-v16/dist/index.js","mtime":1626765536830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5iaWxsIHsKICBiYWNrZ3JvdW5kOiAjZjRmNGY0OwogIG1hcmdpbjogNXB4OwogIG92ZXJmbG93OiBoaWRkZW47CiAgbWluLWhlaWdodDogMTAwcHg7CiAgcGFkZGluZzogMjBweDsKICBib3JkZXItcmFkaXVzOiAxMHB4Owp9CgovKiAub3B0aW9ucy1kaXYgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfSAqLwouZWRpdC1idXR0b24gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBib3JkZXItcmFkaXVzOiA4cHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIGJvcmRlcjogMGNoOwp9CgouZGVsZXRlLWJ1dHRvbiB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIG92ZXJmbG93OiBoaWRkZW47CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXI6IDBjaDsKfQouYmlsbC1idXR0b25zIHsKICBsZWZ0OiA5NyU7CiAgZm9udDogMTVweC8xLjQgIlBvcHBpbnMiLCBzYW5zLXNlcmlmOwogIGNvbG9yOiBibGFjazsKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBsaW5lYXI7CiAgb3V0bGluZTogbm9uZTsKICBmbG9hdDogcmlnaHQ7Cn0KCi5saW5rRmllbGQgewogIHdpZHRoOiAxMCU7CiAgcGFkZGluZzogM3B4IDNweDsKICBtYXJnaW46IDFweCAwOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBib3JkZXI6IDJweCBzb2xpZCAjY2NjOwogIGJvcmRlci1yYWRpdXM6IDEwcHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKfQo="},{"version":3,"sources":["/home/nikhil/Desktop/Project/front_end/src/components/Bill.vue"],"names":[],"mappings":"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","file":"/home/nikhil/Desktop/Project/front_end/src/components/Bill.vue","sourceRoot":"","sourcesContent":["<template>\n  <div\n    class=\"bill\"\n    :style=\"[\n      bill.due_ammount == 0\n        ? { background: 'LightGreen' }\n        : bill.due_ammount < bill.ammount / 2\n        ? { background: 'Lavender' }\n        : { background: 'Pink' },\n    ]\"\n  >\n    <div class=\"bill-buttons\">\n      <button\n        class=\"edit-button\"\n        :style=\"[\n          bill.due_ammount == 0\n            ? { background: 'LightGreen' }\n            : bill.due_ammount < bill.ammount / 2\n            ? { background: 'Lavender' }\n            : { background: 'Pink' },\n          'font-size: 120%',\n        ]\"\n        @click=\"isUpdateClicked = !isUpdateClicked\"\n        alt=\"Edit Bill\"\n      >\n        <i\n          :class=\"['fa', isUpdateClicked ? 'fa-times' : 'fa-pencil']\"\n          aria-hidden=\"true\"\n        ></i>\n      </button>\n\n      <button\n        class=\"delete-button\"\n        :style=\"[\n          bill.due_ammount == 0\n            ? { background: 'LightGreen' }\n            : bill.due_ammount < bill.ammount / 2\n            ? { background: 'Lavender' }\n            : { background: 'Pink' },\n          'font-size: 120%',\n        ]\"\n        @click=\"$emit('delete-bill', bill.b_id)\"\n        alt=\"Delete Bill\"\n      >\n        <i class=\"fa fa-trash\" aria-hidden=\"true\"></i>\n      </button>\n    </div>\n    <h3 v-show=\"bill.due_ammount == 0\">Bill Closed</h3>\n    <label> Org ID : </label>\n    {{ bill.o_id }}\n    <p></p>\n    <label> Bill ID : </label>\n    {{ bill.b_id }}\n    <p></p>\n\n    <div v-show=\"isUpdateClicked\">\n      <label> Ammount : </label>\n      <input\n        class=\"linkField\"\n        type=\"number\"\n        name=\"update_ammount\"\n        id=\"update_ammount\"\n        v-model=\"updateAmmount\"\n      />&#x20B9;\n      <p></p>\n      <label> Due Ammount : </label>\n      <input\n        class=\"linkField\"\n        type=\"number\"\n        name=\"update_due_ammount\"\n        id=\"update_due_ammount\"\n        v-model=\"updateDueAmmount\"\n      />&#x20B9;\n    </div>\n\n    <div v-show=\"!isUpdateClicked\">\n      <label> Ammount : </label>\n      {{ numberWithCommas(bill.ammount) }} &#x20B9;\n\n      <p></p>\n      <label> Due Ammount : </label>\n      {{ numberWithCommas(bill.due_ammount) }} &#x20B9;\n    </div>\n\n    <p></p>\n    <label> Bill Added on : </label>\n    {{ new Date(bill.issue_timestamp).toDateString() }} @\n    {{ new Date(bill.issue_timestamp).toLocaleTimeString(\"en\") }}\n    <div v-show=\"isUpdateClicked\">\n      <Button title=\"Update\" color=\"purple\" @click=\"updateBill\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport Button from \"./Button.vue\";\nexport default {\n  name: \"Bill\",\n  components: { Button },\n  props: {\n    bill: Object,\n  },\n  data() {\n    return {\n      isUpdateClicked: false,\n      updateAmmount: this.bill.ammount,\n      updateDueAmmount: this.bill.due_ammount,\n    };\n  },\n  emits: [\"delete-bill\", \"update-bill\"],\n  methods: {\n    numberWithCommas(x) {\n      return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n    },\n\n    async updateBill() {\n      console.log(\"update bill :\", this.bill.b_id);\n      if (\n        confirm(\n          `Are you sure , you want to update the bill with id : ${this.bill.b_id}`\n        )\n      ) {\n        const response = await fetch(\n          `api/users/${this.getUserId()}/orgs/${this.getOrgId()}/bills/${\n            this.bill.b_id\n          }`,\n          {\n            method: \"PUT\",\n            headers: {\n              \"Content-type\": \"application/json\",\n              authorization: `Bearer ${this.getJwtToken()}`,\n            },\n            body: JSON.stringify({\n              ammount: parseInt(this.updateAmmount),\n              due_ammount: parseInt(this.updateDueAmmount),\n            }),\n          }\n        );\n\n        if (response.status == 200) {\n          let result = await response.json();\n          if (result.statusCode == \"10000\") {\n            this.isUpdateClicked = false;\n\n            this.$emit(\"update-bill\", {\n              ammount: parseInt(this.updateAmmount),\n              due_ammount: parseInt(this.updateDueAmmount),\n              b_id: this.bill.b_id,\n            });\n            // Update the bill in UI.\n            this.bill.ammount = parseInt(this.updateAmmount);\n            this.bill.due_ammount = parseInt(this.updateDueAmmount);\n          } else {\n            alert(\"Unable to update bill.\");\n          }\n        } else {\n          alert(\"Unable to update bill.\");\n        }\n      }\n    },\n\n    getUserId() {\n      const u_id = localStorage.getItem(\"u_id\");\n      if (!u_id) {\n        this.$router.push(\"Login\");\n      }\n      return u_id;\n    },\n\n    getJwtToken() {\n      const jwtToken = localStorage.getItem(\"jwtToken\");\n      if (!jwtToken) {\n        this.$router.push(\"Login\");\n      }\n      return jwtToken;\n    },\n\n    getOrgId() {\n      const o_id = localStorage.getItem(\"org_id\") || this.$route.params.o_id;\n      if (!o_id) {\n        this.$router.push(\"Dashboard\");\n      }\n      return o_id;\n    },\n  },\n};\n</script>\n\n<style scope>\n.bill {\n  background: #f4f4f4;\n  margin: 5px;\n  overflow: hidden;\n  min-height: 100px;\n  padding: 20px;\n  border-radius: 10px;\n}\n\n/* .options-div {\n  position: relative;\n} */\n.edit-button {\n  position: relative;\n  margin-right: 10px;\n  overflow: hidden;\n  border-radius: 8px;\n  cursor: pointer;\n  border: 0ch;\n}\n\n.delete-button {\n  position: relative;\n  overflow: hidden;\n  border-radius: 8px;\n  cursor: pointer;\n  border: 0ch;\n}\n.bill-buttons {\n  left: 97%;\n  font: 15px/1.4 \"Poppins\", sans-serif;\n  color: black;\n  transition: all 0.3s linear;\n  outline: none;\n  float: right;\n}\n\n.linkField {\n  width: 10%;\n  padding: 3px 3px;\n  margin: 1px 0;\n  display: inline-block;\n  border: 2px solid #ccc;\n  border-radius: 10px;\n  box-sizing: border-box;\n}\n</style>"]}]}