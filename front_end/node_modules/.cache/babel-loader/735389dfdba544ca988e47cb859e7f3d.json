{"remainingRequest":"/home/nikhil/Desktop/Project/front_end/node_modules/babel-loader/lib/index.js!/home/nikhil/Desktop/Project/front_end/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nikhil/Desktop/Project/front_end/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nikhil/Desktop/Project/front_end/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nikhil/Desktop/Project/front_end/src/views/Login.vue","mtime":1628680119302},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/babel-loader/lib/index.js","mtime":1626765536666},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/node_modules/vue-loader-v16/dist/index.js","mtime":1626765536830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL25pa2hpbC9EZXNrdG9wL1Byb2plY3QvZnJvbnRfZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgQnV0dG9uIGZyb20gIi4uL2NvbXBvbmVudHMvQnV0dG9uLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1X25hbWU6ICIiLAogICAgICB1X3Bhc3N3b3JkOiAiIiwKICAgICAgbG9naW5GYWlsOiBmYWxzZSwKICAgICAgbG9naW5Gb3JtRW1wdHk6IGZhbHNlLAogICAgICBjb25uZWN0aW9uSXNzdWU6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQnV0dG9uOiBCdXR0b24KICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc0xvZ2luRW5hYmxlZDogZnVuY3Rpb24gaXNMb2dpbkVuYWJsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnVfbmFtZS50cmltKCkubGVuZ3RoID4gMSAmJiB0aGlzLnVfcGFzc3dvcmQudHJpbSgpLmxlbmd0aCA+IDE7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaWduaW46IGZ1bmN0aW9uIHNpZ25pbihldmVudCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGF0YSwgcmVzcG9uc2UsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvL1Jlc2V0IG1lc3NhZ2VzIC4KCiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZhaWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzLmxvZ2luRm9ybUVtcHR5ID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0aW9uSXNzdWUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy51X25hbWUudHJpbSgpID09PSAiIiB8fCBfdGhpcy51X3Bhc3N3b3JkLnRyaW0oKSA9PT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZvcm1FbXB0eSA9IHRydWU7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgdV9uYW1lOiBfdGhpcy51X25hbWUsCiAgICAgICAgICAgICAgICAgIHVfcGFzc3dvcmQ6IF90aGlzLnVfcGFzc3dvcmQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW4gc2lnbmluIDoiLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImFwaS91c2Vycy9sb2dpbiIsIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQ29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzQ29kZSA9PT0gIjEwMDAwIikgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidV9pZCIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kYXRhLnVfaWQpKTsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImp3dFRva2VuIiwgSlNPTi5zdHJpbmdpZnkocmVzdWx0LmRhdGEudG9rZW4pKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiRGFzaGJvYXJkIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDUwMCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5jb25uZWN0aW9uSXNzdWUgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gVE9ETyA6IE5lZWQgdG8gd3JpdGUgYSBlcnJvciBjb21wb25lbnQuCiAgICAgICAgICAgICAgICAgIF90aGlzLmxvZ2luRmFpbCA9IHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0VXNlcklkOiBmdW5jdGlvbiBnZXRVc2VySWQoKSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidV9pZCIpOwogICAgfSwKICAgIGdldEp3dFRva2VuOiBmdW5jdGlvbiBnZXRKd3RUb2tlbigpIHsKICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3RUb2tlbiIpOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmdldFVzZXJJZCgpICYmIHRoaXMuZ2V0Snd0VG9rZW4oKSkgewogICAgICAvLyBVc2VyIGlkIGFuZCBqd3QgdG9rZW4gYXJlIHByZXNlbnQuCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCJEYXNoYm9hcmQiKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/nikhil/Desktop/Project/front_end/src/views/Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"containers\">\n    <form class=\"userDetails\">\n      <label> UserName: </label>\n      <input\n        class=\"linkField\"\n        v-model=\"u_name\"\n        type=\"text\"\n        id=\"u_name\"\n        placeholder=\"User Name\"\n        required\n      />\n      <br />\n      <label>Password : </label>\n      <input\n      class=\"linkField\"\n        v-model=\"u_password\"\n        type=\"password\"\n        id=\"u_password\"\n        placeholder=\"Password\"\n        required\n      />\n      <br />\n      <p v-if=\"loginFail\">Username or password is wrong.</p>\n      <p v-if=\"loginFormEmpty\">Please fill Username and password.</p>\n      <p v-if=\"connectionIssue\">\n        Cannot connect to our service. Please try again in few moments.\n      </p>\n      <input\n        :disabled=\"!isLoginEnabled\"\n        type=\"submit\"\n        @click=\"signin\"\n        value=\"Login\"\n        :style=\"{ background: '#458eff' }\"\n        class=\"btn\"\n      />\n      <router-link to=\"/\">\n        <Button title=\"Cancel\" color=\"red\" />\n      </router-link>\n    </form>\n  </div>\n</template>\n\n\n<script>\nimport Button from \"../components/Button.vue\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      u_name: \"\",\n      u_password: \"\",\n      loginFail: false,\n      loginFormEmpty: false,\n      connectionIssue: false,\n    };\n  },\n  components: {\n    Button,\n  },\n  computed: {\n    isLoginEnabled() {\n      return this.u_name.trim().length > 1 && this.u_password.trim().length > 1;\n    },\n  },\n  methods: {\n    async signin(event) {\n      event.preventDefault();\n      //Reset messages .\n      this.loginFail = false;\n      this.loginFormEmpty = false;\n      this.connectionIssue = false;\n\n      if (this.u_name.trim() === \"\" || this.u_password.trim() === \"\") {\n        this.loginFormEmpty = true;\n        return;\n      }\n      const data = {\n        u_name: this.u_name,\n        u_password: this.u_password,\n      };\n      console.log(\"In signin :\", JSON.stringify(data));\n      const response = await fetch(\"api/users/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n      if (response.status == 200) {\n        const result = await response.json(response);\n        // console.log(result);\n        // console.log(result.data.token);\n        if (result.statusCode === \"10000\") {\n          localStorage.setItem(\"u_id\", JSON.stringify(result.data.u_id));\n          localStorage.setItem(\"jwtToken\", JSON.stringify(result.data.token));\n          this.$router.push(\"Dashboard\");\n        }\n      } else if (response.status == 500) {\n        this.connectionIssue = true;\n      } else {\n        // TODO : Need to write a error component.\n        this.loginFail = true;\n      }\n    },\n    getUserId() {\n      return localStorage.getItem(\"u_id\");\n    },\n\n    getJwtToken() {\n      return localStorage.getItem(\"jwtToken\");\n    },\n  },\n  created() {\n    if (this.getUserId() && this.getJwtToken()) {\n      // User id and jwt token are present.\n      this.$router.push(\"Dashboard\");\n    }\n  },\n};\n</script>\n\n\n\n<style  scoped>\n.userDetails {\n  background: #f4f4f4;\n  margin: 5px;\n  padding: 10px 20px;\n  cursor: pointer;\n}\n.containers {\n  max-width: 500px;\n  margin: 30px auto;\n  overflow: auto;\n  min-height: 100px;\n  border: 1px solid steelblue;\n  padding: 20px;\n  border-radius: 10px;\n}\n\n.linkField {\n  width: 60%;\n  left: 20%;\n  padding: 10px 10px;\n  margin: 5px 0;\n  display: inline-block;\n  border: 2px solid #ccc;\n  border-radius: 10px;\n  box-sizing: border-box;\n}\n</style>"],"sourceRoot":""}]}