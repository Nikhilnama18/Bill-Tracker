{"remainingRequest":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/babel-loader/lib/index.js!/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Login.vue","mtime":1628675290823},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/babel-loader/lib/index.js","mtime":1626765536666},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1626765536830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL25pa2hpbC9EZXNrdG9wL1Byb2plY3QvZnJvbnRfZW5kL3VpLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IEJ1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL0J1dHRvbi52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdV9uYW1lOiAiIiwKICAgICAgdV9wYXNzd29yZDogIiIsCiAgICAgIGxvZ2luRmFpbDogZmFsc2UsCiAgICAgIGxvZ2luRm9ybUVtcHR5OiBmYWxzZSwKICAgICAgY29ubmVjdGlvbklzc3VlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEJ1dHRvbjogQnV0dG9uCiAgfSwKICBjb21wdXRlZDogewogICAgaXNMb2dpbkVuYWJsZWQ6IGZ1bmN0aW9uIGlzTG9naW5FbmFibGVkKCkgewogICAgICByZXR1cm4gdGhpcy51X25hbWUudHJpbSgpLmxlbmd0aCA+IDEgJiYgdGhpcy51X3Bhc3N3b3JkLnRyaW0oKS5sZW5ndGggPiAxOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2lnbmluOiBmdW5jdGlvbiBzaWduaW4oZXZlbnQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGRhdGEsIHJlc3BvbnNlLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgLy9SZXNldCBtZXNzYWdlcyAuCgogICAgICAgICAgICAgICAgX3RoaXMubG9naW5GYWlsID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZvcm1FbXB0eSA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMuY29ubmVjdGlvbklzc3VlID0gZmFsc2U7CgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMudV9uYW1lLnRyaW0oKSA9PT0gIiIgfHwgX3RoaXMudV9wYXNzd29yZC50cmltKCkgPT09ICIiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMubG9naW5Gb3JtRW1wdHkgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGRhdGEgPSB7CiAgICAgICAgICAgICAgICAgIHVfbmFtZTogX3RoaXMudV9uYW1lLAogICAgICAgICAgICAgICAgICB1X3Bhc3N3b3JkOiBfdGhpcy51X3Bhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkluIHNpZ25pbiA6IiwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJhcGkvdXNlcnMvbG9naW4iLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbihyZXNwb25zZSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1c0NvZGUgPT09ICIxMDAwMCIpIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInVfaWQiLCBKU09OLnN0cmluZ2lmeShyZXN1bHQuZGF0YS51X2lkKSk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3RUb2tlbiIsIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kYXRhLnRva2VuKSk7CgogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIkRhc2hib2FyZCIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSA1MDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuY29ubmVjdGlvbklzc3VlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIFRPRE8gOiBOZWVkIHRvIHdyaXRlIGEgZXJyb3IgY29tcG9uZW50LgogICAgICAgICAgICAgICAgICBfdGhpcy5sb2dpbkZhaWwgPSB0cnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldFVzZXJJZDogZnVuY3Rpb24gZ2V0VXNlcklkKCkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVfaWQiKTsKICAgIH0sCiAgICBnZXRKd3RUb2tlbjogZnVuY3Rpb24gZ2V0Snd0VG9rZW4oKSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0VG9rZW4iKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5nZXRVc2VySWQoKSAmJiB0aGlzLmdldEp3dFRva2VuKCkpIHsKICAgICAgLy8gVXNlciBpZCBhbmQgand0IHRva2VuIGFyZSBwcmVzZW50LgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiRGFzaGJvYXJkIik7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"containers\">\n    <form class=\"userDetails\">\n      <label> UserName:</label>\n      <input\n        class=\"linkField\"\n        v-model=\"u_name\"\n        type=\"text\"\n        id=\"u_name\"\n        placeholder=\"User Name\"\n        required\n      />\n      <br />\n      <label>Password :</label>\n      <input\n      class=\"linkField\"\n        v-model=\"u_password\"\n        type=\"password\"\n        id=\"u_password\"\n        placeholder=\"Password\"\n        required\n      />\n      <br />\n      <p v-if=\"loginFail\">Username or password is wrong.</p>\n      <p v-if=\"loginFormEmpty\">Please fill Username and password.</p>\n      <p v-if=\"connectionIssue\">\n        Cannot connect to our service. Please try again in few moments.\n      </p>\n      <input\n        :disabled=\"!isLoginEnabled\"\n        type=\"submit\"\n        @click=\"signin\"\n        value=\"Login\"\n        :style=\"{ background: '#458eff' }\"\n        class=\"btn\"\n      />\n      <router-link to=\"/\">\n        <Button title=\"Cancel\" color=\"red\" />\n      </router-link>\n    </form>\n  </div>\n</template>\n\n\n<script>\nimport Button from \"../components/Button.vue\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      u_name: \"\",\n      u_password: \"\",\n      loginFail: false,\n      loginFormEmpty: false,\n      connectionIssue: false,\n    };\n  },\n  components: {\n    Button,\n  },\n  computed: {\n    isLoginEnabled() {\n      return this.u_name.trim().length > 1 && this.u_password.trim().length > 1;\n    },\n  },\n  methods: {\n    async signin(event) {\n      event.preventDefault();\n      //Reset messages .\n      this.loginFail = false;\n      this.loginFormEmpty = false;\n      this.connectionIssue = false;\n\n      if (this.u_name.trim() === \"\" || this.u_password.trim() === \"\") {\n        this.loginFormEmpty = true;\n        return;\n      }\n      const data = {\n        u_name: this.u_name,\n        u_password: this.u_password,\n      };\n      console.log(\"In signin :\", JSON.stringify(data));\n      const response = await fetch(\"api/users/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n      if (response.status == 200) {\n        const result = await response.json(response);\n        // console.log(result);\n        // console.log(result.data.token);\n        if (result.statusCode === \"10000\") {\n          localStorage.setItem(\"u_id\", JSON.stringify(result.data.u_id));\n          localStorage.setItem(\"jwtToken\", JSON.stringify(result.data.token));\n          this.$router.push(\"Dashboard\");\n        }\n      } else if (response.status == 500) {\n        this.connectionIssue = true;\n      } else {\n        // TODO : Need to write a error component.\n        this.loginFail = true;\n      }\n    },\n    getUserId() {\n      return localStorage.getItem(\"u_id\");\n    },\n\n    getJwtToken() {\n      return localStorage.getItem(\"jwtToken\");\n    },\n  },\n  created() {\n    if (this.getUserId() && this.getJwtToken()) {\n      // User id and jwt token are present.\n      this.$router.push(\"Dashboard\");\n    }\n  },\n};\n</script>\n\n\n\n<style  scoped>\n.userDetails {\n  background: #f4f4f4;\n  margin: 5px;\n  padding: 10px 20px;\n  cursor: pointer;\n}\n.containers {\n  max-width: 500px;\n  margin: 30px auto;\n  overflow: auto;\n  min-height: 100px;\n  border: 1px solid steelblue;\n  padding: 20px;\n  border-radius: 10px;\n}\n\n.linkField {\n  width: 60%;\n  left\n  padding: 10px 10px;\n  margin: 5px 0;\n  display: inline-block;\n  border: 2px solid #ccc;\n  border-radius: 10px;\n  box-sizing: border-box;\n}\n</style>"],"sourceRoot":""}]}