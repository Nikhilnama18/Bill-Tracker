{"remainingRequest":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/babel-loader/lib/index.js!/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Dashboard.vue?vue&type=template&id=22ba47ca&scoped=true","dependencies":[{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Dashboard.vue","mtime":1628673946439},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/babel-loader/lib/index.js","mtime":1626765536666},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1626765537058},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/cache-loader/dist/cjs.js","mtime":1626765536234},{"path":"/home/nikhil/Desktop/Project/front_end/ui-vue/node_modules/vue-loader-v16/dist/index.js","mtime":1626765536830}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVzb2x2ZUNvbXBvbmVudCBhcyBfcmVzb2x2ZUNvbXBvbmVudCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aFNjb3BlSWQgYXMgX3dpdGhTY29wZUlkLCBwdXNoU2NvcGVJZCBhcyBfcHVzaFNjb3BlSWQsIHBvcFNjb3BlSWQgYXMgX3BvcFNjb3BlSWQgfSBmcm9tICJ2dWUiOwoKdmFyIF93aXRoSWQgPSAvKiNfX1BVUkVfXyovX3dpdGhTY29wZUlkKCJkYXRhLXYtMjJiYTQ3Y2EiKTsKCl9wdXNoU2NvcGVJZCgiZGF0YS12LTIyYmE0N2NhIik7Cgp2YXIgX2hvaXN0ZWRfMSA9IHsKICBjbGFzczogImNvbnRhaW5lcnMiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImgxIiwgbnVsbCwgIk9yZ2FuaXNhdGlvbnMiLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMyA9IHsKICBrZXk6IDEKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9CdXR0b24gPSBfcmVzb2x2ZUNvbXBvbmVudCgiQnV0dG9uIik7CgogIHZhciBfY29tcG9uZW50X0FkZE9yZyA9IF9yZXNvbHZlQ29tcG9uZW50KCJBZGRPcmciKTsKCiAgdmFyIF9jb21wb25lbnRfT3JnYW5pc2F0aW9ucyA9IF9yZXNvbHZlQ29tcG9uZW50KCJPcmdhbmlzYXRpb25zIik7CgogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfMSwgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X0J1dHRvbiwgewogICAgb25DbGljazogJG9wdGlvbnMubG9nb3V0LAogICAgdGl0bGU6ICJMb2dvdXQiLAogICAgY29sb3I6ICJyZWQiLAogICAgc3R5bGU6IHsKICAgICAgZmxvYXQ6ICdyaWdodCcKICAgIH0KICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25DbGljayJdKSwgX2hvaXN0ZWRfMiwgX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfQnV0dG9uLCB7CiAgICBvbkNsaWNrOiAkb3B0aW9ucy5hZGRvcmcsCiAgICB0aXRsZTogIkFkZCBPcmdhbmlzYXRpb24iLAogICAgY29sb3I6ICJncmVlbiIKICB9LCBudWxsLCA4CiAgLyogUFJPUFMgKi8KICAsIFsib25DbGljayJdKSwgJGRhdGEuYWRkT3JnID8gKF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKF9jb21wb25lbnRfQWRkT3JnLCB7CiAgICBrZXk6IDAsCiAgICBvblJlZnJlc2g6ICRvcHRpb25zLnB1c2hPcmcsCiAgICBvbkNhbmNlbDogJG9wdGlvbnMuY2FuY2VsCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uUmVmcmVzaCIsICJvbkNhbmNlbCJdKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9jcmVhdGVWTm9kZSgiZGl2IiwgbnVsbCwgWyRkYXRhLmxvZ2dlZCA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfY29tcG9uZW50X09yZ2FuaXNhdGlvbnMsIHsKICAgIGtleTogMCwKICAgIG9uRGVsZXRlT3JnOiAkb3B0aW9ucy5kZWxldGVPcmcsCiAgICBPcmdzOiAkZGF0YS5PcmdzCiAgfSwgbnVsbCwgOAogIC8qIFBST1BTICovCiAgLCBbIm9uRGVsZXRlT3JnIiwgIk9yZ3MiXSkpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpXSksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiA8QnV0dG9uIEBjbGljaz1cIlwiIHRpdGxlPVwiQ2FuY2VsXCIgY29sb3I9XCJyZWRcIiAvPiAiKSwgdHJ1ZSA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygicCIsIF9ob2lzdGVkXzMpKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pOwp9KTs="},{"version":3,"sources":["/home/nikhil/Desktop/Project/front_end/ui-vue/src/views/Dashboard.vue"],"names":[],"mappings":";;;;;;;AACO,EAAA,KAAK,EAAC;;;8BAOT,YAAA,CAAsB,IAAtB,EAAsB,IAAtB,EAAI,eAAJ,EAAiB,CAAA;AAAA;AAAjB,C;;;;;;;;;;;;;;;uBAPF,YAAA,CAeM,KAfN,EAAA,UAAA,EAeM,CAdJ,YAAA,CAKE,iBALF,EAKE;AAJC,IAAA,OAAK,EAAE,QAAA,CAAA,MAIR;AAHA,IAAA,KAAK,EAAC,QAGN;AAFA,IAAA,KAAK,EAAC,KAEN;AADC,IAAA,KAAK,EAAE;AAAA,MAAA,KAAA,EAAA;AAAA;AACR,GALF,E,IAAA,E;;AAAA,I,WAAA,CAcI,EARJ,UAQI,EAPJ,YAAA,CAAiE,iBAAjE,EAAiE;AAAxD,IAAA,OAAK,EAAE,QAAA,CAAA,MAAiD;AAAzC,IAAA,KAAK,EAAC,kBAAmC;AAAhB,IAAA,KAAK,EAAC;AAAU,GAAjE,E,IAAA,E;;AAAA,I,WAAA,CAOI,EAN8C,KAAA,CAAA,M,kBAAlD,YAAA,CAA4D,iBAA5D,EAA4D;UAAA;AAAnD,IAAA,SAAO,EAAE,QAAA,CAAA,OAA0C;AAAhC,IAAA,QAAM,EAAE,QAAA,CAAA;AAAwB,GAA5D,E,IAAA,E;;AAAA,I,yBAAA,C,qCAMI,EALJ,YAAA,CAEM,KAFN,EAEM,IAFN,EAEM,CADwC,KAAA,CAAA,M,kBAA5C,YAAA,CAAmE,wBAAnE,EAAmE;UAAA;AAAnD,IAAA,WAAS,EAAE,QAAA,CAAA,SAAwC;AAAd,IAAA,IAAI,EAAE,KAAA,CAAA;AAAQ,GAAnE,E,IAAA,E;;AAAA,I,uBAAA,C,qCACI,CAFN,CAKI,EAFJ,mBAAA,CAAA,yDAAA,CAEI,EADK,Q,cAAT,YAAA,CAAmB,GAAnB,EAAmB,UAAnB,CAAS,I,iCACL,CAfN,C","sourcesContent":["<template>\n  <div class=\"containers\">\n    <Button\n      @click=\"logout\"\n      title=\"Logout\"\n      color=\"red\"\n      :style=\"{ float: 'right' }\"\n    />\n    <h1>Organisations</h1>\n    <Button @click=\"addorg\" title=\"Add Organisation\" color=\"green\" />\n    <AddOrg @refresh=\"pushOrg\" @cancel=\"cancel\" v-if=\"addOrg\" />\n    <div>\n      <Organisations @deleteOrg=\"deleteOrg\" v-if=\"logged\" :Orgs=\"Orgs\" />\n    </div>\n    <!-- <Button @click=\"\" title=\"Cancel\" color=\"red\" /> -->\n    <p v-if=\"true\"></p>\n  </div>\n</template>\n\n<script>\nimport Button from \"../components/Button.vue\";\nimport Organisations from \"../components/Organisations.vue\";\nimport AddOrg from \"../components/AddOrg.vue\";\nexport default {\n  name: \"Dashboard\",\n  data() {\n    return {\n      Orgs: Array,\n      logged: false,\n      addOrg: false,\n    };\n  },\n  components: {\n    Button,\n    Organisations,\n    AddOrg,\n  },\n  methods: {\n    async deleteOrg(org_id) {\n      const data = {\n        u_id: localStorage.getItem(\"u_id\"),\n        o_id: org_id,\n      };\n      const response = await fetch(\n        `api/users/${localStorage.getItem(\"u_id\")}/orgs/${org_id}`,\n        {\n          method: \"DELETE\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            authorization: `Bearer ${localStorage.getItem(\"jwtToken\")}`,\n          },\n          body: JSON.stringify(data),\n        }\n      );\n      if (response.status === 200) {\n        this.fetchorg();\n      }\n    },\n    logout() {\n      localStorage.removeItem(\"u_id\");\n      localStorage.removeItem(\"jwtToken\");\n      localStorage.removeItem(\"org_id\");\n      this.$router.push({ name: \"Login\" });\n    },\n\n    addorg() {\n      this.addOrg = !this.addOrg;\n    },\n    cancel() {\n      this.addOrg = false;\n    },\n    async fetchorg() {\n      this.addOrg = false;\n      const response = await fetch(\n        `api/users/${localStorage.getItem(\"u_id\")}/orgs`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            authorization: `Bearer ${localStorage.getItem(\"jwtToken\")}`,\n          },\n        }\n      );\n      if (response.status === 200) {\n        let result = await response.json();\n        this.logged = true;\n        this.Orgs = result.data;\n      }\n    },\n    pushOrg(data) {\n      this.Orgs.push(data[0]);\n    },\n    getUserId() {\n      return localStorage.getItem(\"u_id\");\n    },\n\n    getJwtToken() {\n      return localStorage.getItem(\"jwtToken\");\n    },\n  },\n  created() {\n    if (!this.getUserId() || !this.getJwtToken()) {\n      this.$router.push(\"Login\");\n    }\n    this.fetchorg();\n  },\n};\n</script>\n\n<style scoped>\n.containers {\n  max-width: 500px;\n  margin: 30px auto;\n  overflow: auto;\n  min-height: 100px;\n  border: 1px solid steelblue;\n  padding: 20px;\n  border-radius: 10px;\n}\n\n.linkField {\n  width: 10%;\n  padding: 3px 3px;\n  margin: 1px 0;\n  display: inline-block;\n  border: 2px solid #ccc;\n  border-radius: 10px;\n  box-sizing: border-box;\n}\n</style>"],"sourceRoot":""}]}